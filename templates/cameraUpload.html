<!DOCTYPE HTML>
<html>
	<head>
		<title>capstone3</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		<link rel="stylesheet" href="/static/assets/css/str_main.css" />
	</head>
  <style>
    .con1 {
    display: inline-flex;
    flex-direction: column;
    flex-wrap: wrap; 
    justify-content:space-between;
    align-content: center; 
    align-items: stretch;
  }
  .con2 {
    display: inline-flex;
    flex-direction: column;
    flex-wrap: wrap; 
    justify-content:space-between;
    align-content: center; 
    align-items: stretch;
  
  }
  #videoElement {
    width: 700px;
    height: 525px;
    background-color: #666;
}
.imgsrc{ 
    width:100%;
    height:100%;
    object-fit:contain;
  }
  </style>
	<body class="homepage is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">
					<div class="container">

						<!-- Logo -->
              <h1 id="logo"><a href="/user_main">프로그램 이름</a></h1>
						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a class="icon solid fa-home" href="/user_main"><span>Home</span></a></li>
									<li><a class="icon fa-chart-bar" href="/imgUpload"><span>이미지 업로드</span></a></li>
									<li><a class="icon solid fa-cog" href="/cameraUpload"><span>실시간 검사</span></a></li>
									<li><a class="icon solid fa-retweet" href="/list"><span>내역조회</span></a></li>
									<li><a class="icon solid fa-retweet" href="/statistics"><span>통계</span></a></li>
									<li><a class="icon solid fa-sitemap" href="/logout"><span>로그아웃</span></a></li>
								</ul>
							</nav>

					</div>
				</section>

			<!-- Main -->
				<section id="main">
					<div class="container">					
	          <div class="con1" style="width:700px; height:700px; border:1px solid red;">
              <div class="camera">
                <img src="{{ url_for('cameraUpload.video_feed') }}">
              </div>
              <div style="display: inline-flex; flex-direction: row;">
                <button type="button" class="start" id="start" style="height: auto; width: 70px; margin-right: 5px;">start</button>
                <button type="button" class="stop" id="stop" style="height: auto; width: 70px;">stop</button>
              </div>
            </div>
          
            <div class="con2">
              <div class="pre_img"style="width:420px; height:350px; border:1px solid green; ">
              이전 이미지
              <script>
                img_url = sessionStorage.getItem('img_url')
                img_url.replaceAll('"','')
                document.write('<img class="imgsrc" src="',img_url,'">')
              </script>
              </div>
              <div class="pre_result"style="width:420px; height:350px; border:1px solid green;">
                이전 이미지 결과
                <table >
                  <th scope="col">검사 번호</th>
                  <th scope="col">일련 번호</th>
                  <th scope="col">날짜</th>
                  <th scope="col">부품 종류</th>
                  <th scope="col">불량 유형</th>
                  <th scope="col">불량 여부</th>
                  <tr>
                    <td><script>
                      document.write(sessionStorage.getItem('inspection_number'));
                    </script></td>
                    <td><script>
                      document.write(sessionStorage.getItem('part_id'));
                    </script></td>
                    <td><script>
                      document.write(sessionStorage.getItem('date'));
                    </script></td>
                    <td><script>
                      document.write(sessionStorage.getItem('part_name'));
                    </script></td>
                    <td><script>
                      document.write(sessionStorage.getItem('part_category'));
                    </script></td>
                    <td><script>
                      document.write(sessionStorage.getItem('part_judge'));
                    </script></td>
                  </tr>
                </table>
              </div>
          </div>
        </div>
        </section>

			<!-- Footer -->

		<!-- Scripts -->
    <script>
      var video = document.querySelector("#videoElement");
       
      if (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(function (stream) {
            video.srcObject = stream;
          })
          .catch(function (err0r) {
            console.log("Something went wrong!");
          });
      }
      </script>      
            <script>
                var  camera = document.getElementById('camera');
                var frame = document.getElementById('frame');
                camera.addEventListener('change', function(e){
                    var file = e.target.files[0];
                    frame.src = URL.createObjectURL(file);
                });
            </script>
			<script src="/static/assets/js/str_jquery.min.js"></script>
			<script src="/static/assets/js/str_jquery.dropotron.min.js"></script>
			<script src="/static/assets/js/str_browser.min.js"></script>
			<script src="/static/assets/js/str_breakpoints.min.js"></script>
			<script src="/static/assets/js/str_util.js"></script>
			<script src="/static/assets/js/str_main.js"></script>

	</body>
</html>
